<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta content='width=device-width, initial-scale=1' name='viewport'/>
<script charset="UTF-8">

function myFunction() {

    
    var number = document.getElementById("input").value;
    {
        number_array = split(number);
        var output = render(number_array, false);
        document.getElementById("standard").innerHTML = output;
    }
    
    {
        number_array = split_random(number);
        var output = render(number_array,false);
        document.getElementById("random").innerHTML = output;
    }
    
}

function split(text){
    var number_array = [];
    for (i = 0; i < text.length; i+=2){
       number_array.push(parseInt(text.substring(i,i+2)));
    }
    return number_array;
}

function split_random(text){
    var number_array = [];

    for (i = 0; i < text.length; ){
        var step = Math.floor(Math.random()*10) % 2 + 1; 
        var temp = parseInt(text.substring(i,i+step));
        if (temp==0){
            step +=1;
            temp = parseInt(text.substring(i,i+step));
        }
        i = i + step;
        if (isNaN(temp)){
            continue;
        }
        number_array.push(temp);
    }
    return number_array;
}

function render(number_array, should_include_number) {
    var wordlist = [
"空",
"东风",
"何处",
"人间",
"风流",
"归去",
"春风",
"西风",
"归来",
"江南",
"相思",
"梅花",
"千里",
"回首",
"明月",
"多少",
"如今",
"阑干",
"年年",
"万里",
"一笑",
"黄昏",
"当年",
"天涯",
"相逢",
"芳草",
"尊前",
"一枝",
"风雨",
"流水",
"依旧",
"风吹",
"风月",
"多情",
"故人",
"当时",
"无人",
"斜阳",
"不知",
"不见",
"深处",
"时节",
"平生",
"凄凉",
"春色",
"匆匆",
"功名",
"一点",
"无限",
"今日",
"天上",
"杨柳",
"西湖",
"桃花",
"扁舟",
"消息",
"憔悴",
"何事",
"芙蓉",
"神仙",
"一片",
"桃李",
"人生",
"十分",
"心事",
"黄花",
"一声",
"佳人",
"长安",
"东君",
"断肠",
"而今",
"鸳鸯",
"为谁",
"十年",
"去年",
"少年",
"海棠",
"寂寞",
"无情",
"不是",
"时候",
"肠断",
"富贵",
"蓬莱",
"昨夜",
"行人",
"今夜",
"谁知",
"不似",
"江上",
"悠悠",
"几度",
"青山",
"何时",
"天气",
"惟有",
"一曲",
"月明",
"往事"
    ];

    var format = [4,5,6,6,6,6,6,6];

    var na_index =0;
    var output= "";
    if (should_include_number){
        output +=  number_array.toString() +  "<br/> " ;
    }
    for (i = 0; i< format.length; i++){
       for (j=0; j<format[i]; j+=2){
          var temp = wordlist[number_array[na_index]];
          
       //remove extra char
          if (j+1==format[i]){
              temp = temp.substring(0, temp.length-1);
          }
 
          na_index +=1;
          output += temp;

         if (na_index>=number_array.length){
             return output;
          }
       }
       
     
       
       output +=", ";
    }

    return output;

}

</script>
</head>
<title>宋词生成器</title>
<body >
<h1>宋词生成器</h1>
<p>输入一段数字，电话号码，纪念日什么的，一秒钟变成宋词风格文字</p>
<form>
输入数字:<br/>
<input id="input" size=20 value="3.1415926"/>
</form>
 
<button style="font-size:200%" onclick="myFunction()">转换吧!</button>

<br/>
<br/>
转换结果:
<hr/>
标准版
<div style="background:B74934; color:white"id="standard"></div>

<hr/>
随机加长版
<div style="background:577492; color:white"id="random"></div>


</body>
</html>
